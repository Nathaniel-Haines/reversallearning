{
    "collab_server" : "",
    "contents" : "#install.packages(\"R.matlab\")\nlibrary(R.matlab)\n#install.packages('data.table')\nlibrary(data.table)\n#install.packages('ggplot2')\nlibrary(ggplot2)\n#install.packages(\"tidyr\")\nlibrary(tidyr)\n\n#install.packages(\"corrplot\")\nlibrary(corrplot)\nsource(\"rl_behav_analysis_learning_setup.R\")\n\n#now the question from Emily Barkley-Levenson is: does performance on the reward task correlate with performance on the punishment task across subjects?\n#the most principled way to do this is by treating each trial as a separate sample\n#but a graphical way to do this is to get the performance on each trial*subject\n#and look at correlation between reward and punishment for each subject, at each time point.\n#so...\naccuracy.by.pres_seg_subid_rp<-spread(accuracy.by.pres_seg.subid[!is.na(presentation_n_over_segments),.(subid,Motivation,presentation_n_over_segments,prop.correct)],Motivation,prop.correct)\n#we can plot across time the simple CORRELATION across subjects\naccuracy.by.pres_seg_subid_rp.cor<-accuracy.by.pres_seg_subid_rp[,cor.test(punishment,reward,na.rm=TRUE,),by=presentation_n_over_segments]\naccuracy.by.pres_seg_subid_rp[,cor.test(punishment,reward,na.rm=TRUE),by=presentation_n_over_segments] %>% \n  merge(.[seq(1,nrow(.),2),],.[seq(1,nrow(.),1)],\n        by=\"p.value\",\n                               #,\n                              #  by.y=colnames(.)[!colnames(.) %in% c(\"conf.int\")],\n                               suffixes=c(\".lower\",\".upper\"))\n\ntm<-accuracy.by.pres_seg_subid_rp[,cor.test(punishment,reward,na.rm=TRUE),by=presentation_n_over_segments] #%>% \nmergecols<-colnames(tm)[!colnames(tm) %in% c(\"conf.int\")]\naccuracy.by.pres_seg_subid_rp_cor<-merge(tm[seq(1,nrow(tm),2),],tm[seq(2,nrow(tm),2),],\n      by.x=mergecols,by.y=mergecols,\n      suffixes=c(\".lower\",\".upper\"))\n\nggplot(accuracy.by.pres_seg_subid_rp_cor,aes(x=presentation_n_over_segments,y=estimate))+\n  labs(#x=\"Presentation\",\n    y=\"R correlation estimate with 95% CI\",\n    title=paste0(\"Estimate of Reward-Punishment correlation across subjects\\nat each presentation step\"))+\n  geom_line()+\n  geom_errorbar(aes(ymin=conf.int.lower,ymax=conf.int.upper),color=\"#999999\")+\n  geom_point()+\n  reversal_learning_timeline_ggplot_commands\nbreak.labels.2=c(paste(\"Pre-rev\",1:8),paste(\"Rev\",1:5))\naccuracy.by.pres_seg_subid_rp$presentation_n_over_segments<-\n  factor(accuracy.by.pres_seg_subid_rp$presentation_n_over_segments,\n         levels = 1:13,labels=break.labels.2)\nggplot(accuracy.by.pres_seg_subid_rp,aes(x=punishment,y=reward))+\n  facet_wrap(~presentation_n_over_segments)+geom_segment(aes(x=0,y=0,xend=1,yend=1),linetype=2,size=0.02,alpha=0.6)+\n  labs(x=\"Reward Performance across all trials by subject\",\n    y=\"Punishment performance across all trials by subject\",\n    title=paste0(\"Reward and Punishment performance for each subject\"))+\n  geom_smooth(method = \"lm\")+\n  geom_jitter(width = 0.03,height=0.03,alpha=0.4)\n  \n  \n",
    "created" : 1498155500696.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4276331140",
    "id" : "8420FAD",
    "lastKnownWriteTime" : 1498163674,
    "last_content_update" : 1498163674836,
    "path" : "~/Google Drive/joint-modeling/reversal-learning/behavioral-analysis/correlate_reward_and_punishment.R",
    "project_path" : "correlate_reward_and_punishment.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}